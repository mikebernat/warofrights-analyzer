{
  "idleGapSeconds": 300,
  "regimentPatterns": [
    {
      "name": "CB Clan with Brackets",
      "pattern": "^CB\\s*[\\[\\{]",
      "description": "Extracts CB clan when followed by brackets/braces (e.g., CB[30thOH], CB{30thOH}, CB [30thOH])",
      "extractGroup": 0,
      "normalize": "extractCB"
    },
    {
      "name": "CQB Clan with Wrapper",
      "pattern": "^CQB\\s*[\\[\\{\\(]",
      "description": "Extracts CQB clan when followed by brackets/braces/parens (e.g., CQB[11thTX], CQB(11TX), CQB [11thTX])",
      "extractGroup": 0,
      "normalize": "extractCQB"
    },
    {
      "name": "TKO Clan with Wrapper",
      "pattern": "^TKO\\s*-?\\s*[\\[\\{\\(]",
      "description": "Extracts TKO clan when followed by dash and wrapper (e.g., TKO-[3rdKY], TKO-{3rdKY})",
      "extractGroup": 0,
      "normalize": "extractTKO"
    },
    {
      "name": "JD Clan with Wrapper",
      "pattern": "^JD\\s*-?\\s*[\\[\\{\\(]",
      "description": "Extracts JD clan when followed by optional dash and wrapper (e.g., JD[38Va], JD-[38th Va], JD{JD-CAV})",
      "extractGroup": 0,
      "normalize": "extractJD"
    },
    {
      "name": "V Clan with Dash and Wrapper",
      "pattern": "^V\\s*-\\s*[\\[\\{\\(]",
      "description": "Extracts V clan when followed by dash and wrapper (e.g., V-[1stMD.Cav], V-[8thCT], V-(65thIL))",
      "extractGroup": 0,
      "normalize": "extractV"
    },
    {
      "name": "CB Clan with Parens",
      "pattern": "^CB\\s*\\(",
      "description": "Extracts CB clan when followed by parentheses (e.g., CB(8thOh))",
      "extractGroup": 0,
      "normalize": "extractCB"
    },
    {
      "name": "CB Underscore Prefix",
      "pattern": "^CB_",
      "description": "Extracts CB from underscore format (e.g., CB_8ThOhio_Pv2_Sword)",
      "extractGroup": 0,
      "normalize": "extractCB"
    },
    {
      "name": "Prefix Before Any Wrapper",
      "pattern": "^([A-Za-z]{3,4})[\\[\\{\\(][^\\]\\}\\)]+[\\]\\}\\)]",
      "description": "Extracts prefix before any wrapper (3-4 letters, no space/dash between)",
      "extractGroup": 1
    },
    {
      "name": "Brackets with Spaces in Regiment (Case Insensitive)",
      "pattern": "\\[([0-9]+(?:st|nd|rd|th)?\\s+[A-Za-z]{2,4})(?:\\s+[A-Za-z]{2,4})?\\]",
      "description": "Extracts regiment from brackets with spaces (requires space) - case insensitive",
      "extractGroup": 1,
      "normalize": "removeSpaces"
    },
    {
      "name": "Braces with Spaces in Regiment (Case Insensitive)",
      "pattern": "\\{([0-9]+(?:st|nd|rd|th)?\\s*[A-Za-z]{2,4})(?:\\s+[A-Za-z]{2,4})?\\}",
      "description": "Extracts regiment from braces with optional spaces (e.g., {65th IL}, {6thAR WA}) - case insensitive",
      "extractGroup": 1,
      "normalize": "removeSpaces"
    },
    {
      "name": "Parentheses with Spaces in Regiment (Case Insensitive)",
      "pattern": "\\(([0-9]+(?:st|nd|rd|th)?\\s*[A-Za-z]{2,4})(?:\\s+[A-Za-z]{2,4})?\\)",
      "description": "Extracts regiment from parentheses with optional spaces (e.g., (7TH AR)) - case insensitive",
      "extractGroup": 1,
      "normalize": "removeSpaces"
    },
    {
      "name": "Parentheses with Company Suffix",
      "pattern": "\\(([0-9]+(?:st|nd|rd|th)?[A-Z]{2,4})\\.[A-Z]+\\)",
      "description": "Extracts regiment from parentheses with company suffix (e.g., (6thAR.WA))",
      "extractGroup": 1
    },
    {
      "name": "Brackets with Dash in Regiment (Case Insensitive)",
      "pattern": "\\[([0-9]+(?:st|nd|rd|th)?-[A-Za-z]{2,4})\\]",
      "description": "Extracts regiment from brackets with dash (e.g., [65th-IL]) - case insensitive",
      "extractGroup": 1,
      "normalize": "removeDash"
    },
    {
      "name": "Clan at Start Before Rank",
      "pattern": "^([A-Z]{2,4})[-\\s]",
      "description": "Extracts clan tag at start followed by dash or space (e.g., II-Brig.Gen, II 6th)",
      "extractGroup": 1
    },
    {
      "name": "Bracket Missing Close with Company",
      "pattern": "^\\[([0-9]+(?:st|nd|rd|th)?)[\\(]",
      "description": "Extracts regiment from bracket missing close bracket (e.g., [59th(A))",
      "extractGroup": 1
    },
    {
      "name": "Bracket with Company Suffix Multiple Dots",
      "pattern": "\\[([0-9]+(?:st|nd|rd|th)?[A-Z]{2,4})(?:\\.[A-Z]+)+\\]",
      "description": "Extracts regiment from brackets with multiple dot suffixes (e.g., [12thVA.E.BB])",
      "extractGroup": 1
    },
    {
      "name": "Brackets with Company in Parens",
      "pattern": "\\[([0-9]+(?:st|nd|rd|th)?[A-Z]{2,4})\\s*\\([A-Z]+\\)\\]",
      "description": "Extracts regiment from brackets with company in parens (e.g., [59thNY (B)], [59NY(WB)])",
      "extractGroup": 1
    },
    {
      "name": "Brackets with Dot Space Company",
      "pattern": "\\[([0-9]+(?:st|nd|rd|th)?[A-Z]{2,4})\\.\\s+[A-Z]+\\]",
      "description": "Extracts regiment from brackets with dot space company (e.g., [7thTX. H])",
      "extractGroup": 1
    },
    {
      "name": "Mismatched Wrapper at Start",
      "pattern": "^\\[([0-9]+(?:st|nd|rd|th)?[A-Za-z]{2,4})[\\}\\)]",
      "description": "Extracts regiment from mismatched wrappers at start (e.g., [51STAL}, [59th(A))",
      "extractGroup": 1
    },
    {
      "name": "Bracket with Space and Company",
      "pattern": "^\\[([0-9]+(?:st|nd|rd|th)?\\s+[A-Z]{2,4})\\s+\\([A-Z]\\)",
      "description": "Extracts regiment from bracket with space and company (e.g., [59th NY (A))",
      "extractGroup": 1
    },
    {
      "name": "Ordinal with Abbreviated State",
      "pattern": "^([0-9]+(?:st|nd|rd|th)?)\\s+([A-Z][a-z]\\.)",
      "description": "Extracts regiment from ordinal with abbreviated state (e.g., 5th Fl.)",
      "extractGroup": 0
    },
    {
      "name": "Dash Space Pattern",
      "pattern": "^([A-Z]{2,4})\\s+-\\s+",
      "description": "Extracts prefix before dash with spaces (e.g., PA - Ninja)",
      "extractGroup": 1
    },
    {
      "name": "Regiment Before Company Bracket",
      "pattern": "^([0-9]+(?:st|nd|rd|th)?[A-Z]{2,4})\\[[A-Z]+\\]",
      "description": "Extracts regiment before company letter in brackets (e.g., 5thFLA[A])",
      "extractGroup": 1
    },
    {
      "name": "Brackets with Trailing Dot After State",
      "pattern": "^\\[([0-9]+(?:st|nd|rd|th)?\\s+[A-Z]{2,4})\\.\\]",
      "description": "Extracts regiment from brackets with trailing dot after state (e.g., [51st AL.])",
      "extractGroup": 1,
      "normalize": "removeSpaces"
    },
    {
      "name": "Brackets at Start with Company and Trailing Dot",
      "pattern": "^\\[([0-9]+(?:st|nd|rd|th)?\\s*[A-Z]{2,4})\\.[A-Z]+\\.\\]",
      "description": "Extracts regiment from brackets with company suffix and trailing dot (e.g., [12thVA.A.])",
      "extractGroup": 1,
      "normalize": "removeSpaces"
    },
    {
      "name": "Brackets at Start with Company",
      "pattern": "^\\[([0-9]+(?:st|nd|rd|th)?[A-Z]{2,4})\\.[A-Z]+\\]",
      "description": "Extracts regiment from brackets with company suffix (e.g., [12thVA.A], [12thVA.BB])",
      "extractGroup": 1
    },
    {
      "name": "Clan-Regiment-Company Pattern",
      "pattern": "^([A-Z]{2,4})-([0-9]+(?:st|nd|rd|th)?[A-Z]{2,4})\\([A-Z]\\)",
      "description": "Matches II-6thLA(A) format - extracts full regiment with company",
      "extractGroup": 0
    },
    {
      "name": "Clan-Regiment Pattern",
      "pattern": "^([A-Z]{2,4})-([0-9]+(?:st|nd|rd|th)?[A-Z]{2,4})",
      "description": "Matches II-6thLA, TKO-3RDKY format",
      "extractGroup": 0
    },
    {
      "name": "Parentheses Regiment",
      "pattern": "\\(([0-9]+(?:st|nd|rd|th)?\\s*[A-Z]{2,4})\\)",
      "description": "Extracts regiment from parentheses like (12th VA), (1stMO)"
    },
    {
      "name": "Parentheses Company Only",
      "pattern": "([0-9]+(?:st|nd|rd|th)?[A-Z]{2,4})\\([A-Z]+\\)",
      "description": "Extracts regiment before company marker like 6thLA(A), 59thNY(A)",
      "extractGroup": 1
    },
    {
      "name": "Square Brackets with Company Suffix",
      "pattern": "\\[([0-9]+(?:st|nd|rd|th)?[A-Za-z]{2,4})[\\.\\(\\{][A-Za-z]+[\\)\\}\\]]?\\]",
      "description": "Extracts regiment from brackets, stripping company suffixes like .CAV, .Cav, (LB), {A}",
      "extractGroup": 1,
      "normalize": "uppercase"
    },
    {
      "name": "Square Brackets (Generic)",
      "pattern": "\\[([^\\]]+)\\]",
      "description": "Extracts leftmost [] token",
      "normalize": "cleanCompanySuffix"
    },
    {
      "name": "Curly Braces (Generic)",
      "pattern": "\\{([^}]+)\\}",
      "description": "Extracts leftmost {} token",
      "normalize": "cleanCompanySuffix"
    },
    {
      "name": "Pipe Delimiter",
      "pattern": "^([^|]+)\\|",
      "description": "Extracts clan before pipe (e.g., SR|3AR)"
    },
    {
      "name": "Underscore Delimiter",
      "pattern": "^([A-Z]+)_([0-9]+(?:st|nd|rd|th)?[A-Z]{2,4})",
      "description": "Extracts regiment from underscore format (e.g., CB_8ThOhio)",
      "extractGroup": 2,
      "normalize": "truncateState"
    },
    {
      "name": "Clan Prefix with Dash",
      "pattern": "^([A-Z]{2,4})\\s*-\\s*([0-9]+(?:st|nd|rd|th)?\\s*[A-Z]{2,4})",
      "description": "Handles spaced dash format like 'II - 6thLA'",
      "extractGroup": 2
    },
    {
      "name": "Clan with Brackets",
      "pattern": "([A-Z]{2,4})-\\[([^\\]]+)\\]",
      "description": "Clan prefix with bracket combo (e.g., JD-[38th Va])",
      "extractGroup": 2
    },
    {
      "name": "Clan with Braces",
      "pattern": "([A-Z]{2,4})\\{([^}]+)\\}",
      "description": "Clan prefix with brace combo",
      "extractGroup": 2
    },
    {
      "name": "Unit at Start",
      "pattern": "^([0-9]+(?:st|nd|rd|th)?\\s*[A-Za-z]{2,4})",
      "description": "Unit token at start with optional space (e.g., 5thFla, 5thFLA, 59th NY)"
    },
    {
      "name": "Prefix Acronyms",
      "pattern": "^(CQB|MSG|AVC|FSB)\\s*\\(?([^)]+)?\\)?",
      "description": "Common regiment prefixes like CQB, MSG, AVC, FSB",
      "extractGroup": 1
    }
  ],
  "rankPatterns": [
    "Pvt\\.?",
    "Pv2\\.?",
    "Pfc\\.?",
    "PFC\\.?",
    "SrPvt\\.?",
    "Cpl\\.?",
    "Sgt\\.?",
    "SGM\\.?",
    "1stSgt\\.?",
    "SgtMaj\\.?",
    "2ndLt\\.?",
    "1stLt\\.?",
    "Lt\\.?",
    "Capt\\.?",
    "Cpt\\.?",
    "Maj\\.?",
    "LtCol\\.?",
    "Col\\.?",
    "BrigGen\\.?",
    "Brig\\.Gen\\.?",
    "MajGen\\.?",
    "Rct\\.?",
    "Vol\\.?",
    "Adj\\.?",
    "QMSgt\\.?",
    "OrdSgt\\.?",
    "Chap\\.?",
    "Gun Cpt\\.?",
    "Gnr\\.?",
    "DrumMaj\\.?",
    "RGrd\\.?"
  ],
  "topNDefaults": {
    "regimentBar": 10,
    "playerBar": 10,
    "regimentTimeline": 5
  },
  "normalizationRules": {
    "removeSpaces": "Remove all spaces from extracted regiment name",
    "removeDash": "Remove dashes and normalize to single word",
    "uppercase": "Convert to uppercase for consistency",
    "cleanCompanySuffix": "Remove company suffixes like .CAV, .Cav, (LB), {A}, {D}, etc.",
    "truncateState": "Truncate state abbreviations longer than 2 letters (e.g., OHIO -> OH, TEXAS -> TX)"
  },
  "companySuffixPatterns": [
    "\\.CAV$",
    "\\.Cav$",
    "\\.WA$",
    "\\(LB\\)$",
    "\\{[A-Z]\\}$",
    "\\{[A-Z]{2}\\}$",
    "\\[[A-Z]\\]$",
    "\\.[A-Z]{1,3}$"
  ]
}
